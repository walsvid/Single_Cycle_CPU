# Single_Cycle_CPU
Single Cycle MIPS CPU using Verilog HDL.

## 组成
- ALU
- Controller 控制器
- Fetch Instruction Circuit 取指电路
- 寄存器堆

## 准备实现的指令

### R型指令

|      |   OP    |   rs    |   rt    |   rd    | shamt  |  func  |       |
| :--: | :-----: | :-----: | :-----: | :-----: | :----: | :----: | :---: |
|  指令  | [31:26] | [25:21] | [20:16] | [15:11] | [10:6] | [5:0]  |  功能   |
| add  | 000000  |   rs    |   rt    |   rd    | 00000  | 100000 | 寄存器加  |
| sub  | 000000  |   rs    |   rt    |   rd    | 00000  | 100010 | 寄存器减  |
| and  | 000000  |   rs    |   rt    |   rd    | 00000  | 100100 | 寄存器与  |
|  or  | 000000  |   rs    |   rt    |   rd    | 00000  | 100101 | 寄存器或  |
| xor  | 000000  |   rs    |   rt    |   rd    | 00000  | 100110 | 寄存器亦或 |
| sll  | 000000  |  00000  |   rt    |   rd    |   sa   | 000000 |  左移   |
| srl  | 000000  |  00000  |   rt    |   rd    |   sa   | 000010 | 逻辑右移  |
| sra  | 000000  |  00000  |   rt    |   rd    |   sa   | 000011 | 算数右移  |
|  jr  | 000000  | rs=$ra  |  00000  |  00000  | 00000  | 001000 | 过程返回  |

### I型指令

|      |   OP    |   rs    |   rt    |    imm    |       |
| :--: | :-----: | :-----: | :-----: | :-------: | :---: |
|  指令  | [31:26] | [25:21] | [20:16] |  [15:0]   |  功能   |
| addi | 001000  |   rs    |   rt    | immediate | 立即数加  |
| andi | 001100  |   rs    |   rt    | immediate | 立即数与  |
| ori  | 001101  |   rs    |   rt    | immediate | 立即数或  |
| xori | 001110  |   rs    |   rt    | immediate | 立即数异或 |
|  lw  | 100011  |   rs    |   rt    |  offset   |  取数据  |
|  sw  | 101011  |   rs    |   rt    |  offset   |  存数据  |
| beq  | 000100  |   rs    |   rt    |  offset   | 相等转移  |
| bne  | 000101  |   rs    |   rt    |  offset   | 不等转移  |
| lui  | 001111  |  00000  |   rt    | immediate | 设置高位  |

### J型指令

|      |   OP    | address |      |
| :--: | :-----: | :-----: | :--: |
|  指令  | [31:26] | [25:0]  |  功能  |
|  j   | 000010  | address |  跳转  |
| jal  | 000011  | address | 过程调用 |

## 完成情况
### 取指电路
- [x] `R`，`I`，`J`三种类型的指令取值
- [x] `PC` 寄存器
- [] `PCselect`

### ALU
- [x] `+`
- [x] `-`
- [x] `&`
- [x] `|`
- [x] `^`
- [x] `lui`
- [x] 移位运算

# 寄存器堆
- [x] 简单读写
